<div>

JavaScript is disabled on your browser.

</div>

::: {role="banner"}
::: fixedNav
::: topNav
[]{#navbar.top}

::: skipNav
[Skip navigation links](#skip.navbar.top "Skip navigation links")
:::

[]{#navbar.top.firstrow}

-   [Overview](../../../../../../../index.html)
-   [Package](package-summary.html)
-   Class
-   [Tree](package-tree.html)
-   [Deprecated](../../../../../../../deprecated-list.html)
-   [Index](../../../../../../../index-all.html)
-   [Help](../../../../../../../help-doc.html)
:::

::: subNav
-   [All Classes](../../../../../../../allclasses.html)

```{=html}
<!-- -->
```
-   SEARCH:

<div>

<div>

JavaScript is disabled on your browser.

</div>

</div>

<div>

-   Summary: 
-   Nested \| 
-   Field \| 
-   [Constr](#constructor.summary) \| 
-   [Method](#method.summary)

```{=html}
<!-- -->
```
-   Detail: 
-   Field \| 
-   [Constr](#constructor.detail) \| 
-   [Method](#method.detail)

</div>

[]{#skip.navbar.top}
:::
:::

::: navPadding
 
:::
:::

::: {role="main"}
::: header
::: subTitle
[Package]{.packageLabelInType} [com.facebook.buck.core.build.engine.buildinfo](package-summary.html)
:::

## Class BuildInfoRecorder {#class-buildinforecorder .title title="Class BuildInfoRecorder"}
:::

::: contentContainer
-   [java.lang.Object](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true "class or interface in java.lang"){.externalLink}

-   -   com.facebook.buck.core.build.engine.buildinfo.BuildInfoRecorder

::: description
-   

    ------------------------------------------------------------------------

        public class BuildInfoRecorder
        extends Object

    ::: block
    Utility for recording the paths to the output files generated by a
    build rule, as well as any metadata about those output files. This
    data will be packaged up into an artifact that will be stored in the
    cache. The metadata will also be written to disk so it can be read
    on a subsequent build by an
    [`OnDiskBuildInfo`](OnDiskBuildInfo.html "interface in com.facebook.buck.core.build.engine.buildinfo").
    :::
:::

::: summary
-   ::: {.section role="region"}
    -   []{#constructor.summary}

        ### Constructor Summary

          Constructor                                                                                                                                                                                                                                                                                              Description
          -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- -------------
          `BuildInfoRecorder​(BuildTarget buildTarget,                  ProjectFilesystem projectFilesystem,                  BuildInfoStore buildInfoStore,                  Clock clock,                  BuildId buildId,                  com.google.common.collect.ImmutableMap<String,​String> environment)`    

          : Constructors[ ]{.tabEnd}
    :::

    ::: {.section role="region"}
    -   []{#method.summary}

        ### Method Summary

        +-----------------------+-----------------------+-----------------------+
        | Modifier and Type     | Method                | Description           |
        +=======================+=======================+=======================+
        | `BuildInfoRecorder`   | `addBuildMetadata​(    | ::: block             |
        |                       | String key,           | Used by the build     |
        |                       |        String value)` | engine to record      |
        |                       |                       | metadata describing   |
        |                       |                       | the build (e.g.       |
        |                       |                       | :::                   |
        +-----------------------+-----------------------+-----------------------+
        | `void`                | `addMet               |                       |
        |                       | adata​(String key,     |                       |
        |                       |         com.google.co |                       |
        |                       | mmon.collect.Immutabl |                       |
        |                       | eList<String> value)` |                       |
        +-----------------------+-----------------------+-----------------------+
        | `void`                | `addMeta              | ::: block             |
        |                       | data​(String key,      | This key/value pair   |
        |                       |        String value)` | is stored in memory   |
        |                       |                       | until                 |
        |                       |                       | [`writeMetadataToDisk |
        |                       |                       | (boolean)`](#writeMet |
        |                       |                       | adataToDisk(boolean)) |
        |                       |                       | is invoked.           |
        |                       |                       | :::                   |
        +-----------------------+-----------------------+-----------------------+
        | `void`                | `assertOnlyHas        |                       |
        |                       | Keys​(String... keys)` |                       |
        +-----------------------+-----------------------+-----------------------+
        | `Optional<String>`    | `getBuildMet          |                       |
        |                       | adataFor​(String key)` |                       |
        +-----------------------+-----------------------+-----------------------+
        | `com.google.          | `get                  |                       |
        | common.hash.HashCode` | OutputHash​(FileHashLo |                       |
        |                       | ader fileHashLoader)` |                       |
        +-----------------------+-----------------------+-----------------------+
        | `com.googl            | `getRecordedPaths()`  |                       |
        | e.common.collect.Immu |                       |                       |
        | tableSortedSet<Path>` |                       |                       |
        +-----------------------+-----------------------+-----------------------+
        | `void`                | `recordArtifact​(      |                       |
        |                       | Path pathToArtifact)` |                       |
        +-----------------------+-----------------------+-----------------------+
        | `void`                | `u                    |                       |
        |                       | pdateBuildMetadata()` |                       |
        +-----------------------+-----------------------+-----------------------+
        | `void`                | `writeMeta            | ::: block             |
        |                       | dataToDisk​(boolean cl | Writes the metadata   |
        |                       | earExistingMetadata)` | currently stored in   |
        |                       |                       | memory to the         |
        |                       |                       | directory returned by |
        |                       |                       | [`BuildInfo.ge        |
        |                       |                       | tPathToArtifactMetada |
        |                       |                       | taDirectory(BuildTarg |
        |                       |                       | et, ProjectFilesystem |
        |                       |                       | )`](BuildInfo.html#ge |
        |                       |                       | tPathToArtifactMetada |
        |                       |                       | taDirectory(com.faceb |
        |                       |                       | ook.buck.core.model.B |
        |                       |                       | uildTarget,com.facebo |
        |                       |                       | ok.buck.io.filesystem |
        |                       |                       | .ProjectFilesystem)). |
        |                       |                       | :::                   |
        +-----------------------+-----------------------+-----------------------+

        : [All Methods[ ]{.tabEnd}]{#t0 .activeTableTab}[[Instance
        Methods](javascript:show(2);)[ ]{.tabEnd}]{#t2
        .tableTab}[[Concrete
        Methods](javascript:show(8);)[ ]{.tabEnd}]{#t4 .tableTab}

        -   []{#methods.inherited.from.class.java.lang.Object}

            ### Methods inherited from class java.lang.[Object](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true "class or interface in java.lang"){.externalLink}

            `clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait`
    :::
:::

::: details
-   ::: {.section role="region"}
    -   []{#constructor.detail}

        ### Constructor Detail

        []{#<init>(com.facebook.buck.core.model.BuildTarget,com.facebook.buck.io.filesystem.ProjectFilesystem,com.facebook.buck.core.build.engine.buildinfo.BuildInfoStore,com.facebook.buck.util.timing.Clock,com.facebook.buck.core.model.BuildId,com.google.common.collect.ImmutableMap)}

        -   #### BuildInfoRecorder

                public BuildInfoRecorder​(BuildTarget buildTarget,
                                         ProjectFilesystem projectFilesystem,
                                         BuildInfoStore buildInfoStore,
                                         Clock clock,
                                         BuildId buildId,
                                         com.google.common.collect.ImmutableMap<String,​String> environment)
    :::

    ::: {.section role="region"}
    -   []{#method.detail}

        ### Method Detail

        []{#writeMetadataToDisk(boolean)}

        -   #### writeMetadataToDisk

            ``` methodSignature
            public void writeMetadataToDisk​(boolean clearExistingMetadata)
                                     throws IOException
            ```

            ::: block
            Writes the metadata currently stored in memory to the
            directory returned by
            [`BuildInfo.getPathToArtifactMetadataDirectory(BuildTarget, ProjectFilesystem)`](BuildInfo.html#getPathToArtifactMetadataDirectory(com.facebook.buck.core.model.BuildTarget,com.facebook.buck.io.filesystem.ProjectFilesystem)).
            :::

            [Throws:]{.throwsLabel}
            :   `IOException`

        []{#updateBuildMetadata()}

        -   #### updateBuildMetadata

            ``` methodSignature
            public void updateBuildMetadata()
                                     throws IOException
            ```

            [Throws:]{.throwsLabel}
            :   `IOException`

        []{#addBuildMetadata(java.lang.String,java.lang.String)}

        -   #### addBuildMetadata

            ``` methodSignature
            public BuildInfoRecorder addBuildMetadata​(String key,
                                                      String value)
            ```

            ::: block
            Used by the build engine to record metadata describing the
            build (e.g. rule key, build UUID).
            :::

        []{#addMetadata(java.lang.String,java.lang.String)}

        -   #### addMetadata

            ``` methodSignature
            public void addMetadata​(String key,
                                    String value)
            ```

            ::: block
            This key/value pair is stored in memory until
            [`writeMetadataToDisk(boolean)`](#writeMetadataToDisk(boolean))
            is invoked.
            :::

        []{#addMetadata(java.lang.String,com.google.common.collect.ImmutableList)}

        -   #### addMetadata

            ``` methodSignature
            public void addMetadata​(String key,
                                    com.google.common.collect.ImmutableList<String> value)
            ```

        []{#getRecordedPaths()}

        -   #### getRecordedPaths

            ``` methodSignature
            public com.google.common.collect.ImmutableSortedSet<Path> getRecordedPaths()
            ```

        []{#getOutputHash(com.facebook.buck.util.hashing.FileHashLoader)}

        -   #### getOutputHash

            ``` methodSignature
            public com.google.common.hash.HashCode getOutputHash​(FileHashLoader fileHashLoader)
                                                          throws IOException
            ```

            [Throws:]{.throwsLabel}
            :   `IOException`

        []{#recordArtifact(java.nio.file.Path)}

        -   #### recordArtifact

            ``` methodSignature
            public void recordArtifact​(Path pathToArtifact)
            ```

            [Parameters:]{.paramLabel}
            :   `pathToArtifact` - Relative path to the project root.

        []{#getBuildMetadataFor(java.lang.String)}

        -   #### getBuildMetadataFor

            ``` methodSignature
            public Optional<String> getBuildMetadataFor​(String key)
            ```

        []{#assertOnlyHasKeys(java.lang.String...)}

        -   #### assertOnlyHasKeys

            ``` methodSignature
            public void assertOnlyHasKeys​(String... keys)
            ```
    :::
:::
:::
:::

::: bottomNav
[]{#navbar.bottom}

::: skipNav
[Skip navigation links](#skip.navbar.bottom "Skip navigation links")
:::

[]{#navbar.bottom.firstrow}

-   [Overview](../../../../../../../index.html)
-   [Package](package-summary.html)
-   Class
-   [Tree](package-tree.html)
-   [Deprecated](../../../../../../../deprecated-list.html)
-   [Index](../../../../../../../index-all.html)
-   [Help](../../../../../../../help-doc.html)
:::

::: subNav
-   [All Classes](../../../../../../../allclasses.html)

<div>

<div>

JavaScript is disabled on your browser.

</div>

</div>

<div>

-   Summary: 
-   Nested \| 
-   Field \| 
-   [Constr](#constructor.summary) \| 
-   [Method](#method.summary)

```{=html}
<!-- -->
```
-   Detail: 
-   Field \| 
-   [Constr](#constructor.detail) \| 
-   [Method](#method.detail)

</div>

[]{#skip.navbar.bottom}
:::
